# how_to_use_ble

BLE code example

# 🔗 BLE（Bluetooth Low Energy）通信の仕組み解説

BLE通信における基本的な仕組みと、セントラル ↔ ペリフェラル間でのデータのやり取りについて説明

---

## 🧠 BLEとは？

**BLE（Bluetooth Low Energy）**は、省電力で短距離通信ができる無線通信規格。  
ちょっとしたデータをちょこちょこやりとりするのに向いていて、IoT機器やスマートデバイスによく使われている。

---

## 🧑‍🔧 BLEの基本構造：ペリフェラルとセントラル

| 役割 | 説明 | 例 |
|------|------|----|
| 🛰️ ペリフェラル（Peripheral） | データを持ってて広告を出す側 | 心拍センサー、温度センサーなど |
| 📱 セントラル（Central） | データを取得・操作する側 | スマホアプリ、PCなど |

BLEでは、**セントラルがペリフェラルに接続しにいく**という構成になります。

---

## 📡 接続までの流れ：アドバタイジングとスキャン

1. **ペリフェラル**が `Advertising`（自分の存在を知らせる）
2. **セントラル**が `Scanning`（近くのペリフェラルを探す）
3. **条件が合えば接続（Connect）**

### ② 接続後は GATT 通信

BLEでは、接続後に**GATT（Generic Attribute Profile）**という仕組みでデータをやり取りします。

### 🔐 GATTの構成

BLEの通信は「サービス（Service）」と「キャラクタリスティック（Characteristic）」という階層構造になってる。

- **Service（サービス）**  
  データのカテゴリみたいなもん。例：心拍数サービス、バッテリーサービスなど。

- **Characteristic（キャラクタリスティック）**  
  実際にやりとりするデータ単位。1つのサービスに複数ぶら下がる。

- **Value（値）**  
  キャラクタリスティックの中身。読み書きするのはこれ。

- **Descriptor（ディスクリプタ）**  
  キャラの補足説明とか、Notifyするかどうかの設定を持ってる。
